{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Nova Ideeenbus</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.com/libraries/normalize">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <link rel="stylesheet" href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css">
    <link href="{% static "css/style.css" %}" rel="stylesheet">
    <link href="{% static "css/vue-datetime.css" %}" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
</head>
<body>
<main>
    <div id="app" class="grid">
        <div class="item item1">
            <id-canvas></id-canvas>
        </div>
        <div class="item item2">
            <id-ideas></id-ideas>
        </div>
        <div class="item item3">
            <id-appointment></id-appointment>
        </div>
    </div>
</main>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.js"></script>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<!-- import vue and then vue-mdc-adapter -->
<script src="https://unpkg.com/vue"></script>
<script src="https://cdn.jsdelivr.net/npm/vue-resource@1.3.4"></script>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="{% static "channels/js/websocketbridge.js" %}"></script>
<script src="{% static "vue-datetime.common.js" %}" type="module"></script>
<script src="{% static "typeflow.js" %}"></script>
<script src="{% static "datetimetypeflow.js" %}"></script>
<script src="{% static "main.js" %}"></script>
<script src="{% static "md-color-picker.js" %}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
<script>
    Vue.http.interceptors.push(function (request, next) {
        request.headers.set('X-CSRFToken', Cookies.get('csrftoken'));
        next();
    });


    $(document).ready(function () {
        console.log("document ready")
        // the "href" attribute of the modal trigger must specify the modal ID that wants to be triggered
        $('.modal').modal({
            dismissible: false,
            ready: function (modal, trigger) { // Callback for Modal open. Modal and trigger parameters available.
                console.log("Ready");
                console.log(modal, trigger);
            },
        });
        $('select').material_select();


        $('.datepicker').pickadate({
            selectMonths: true, // Creates a dropdown to control month
            selectYears: 15, // Creates a dropdown of 15 years to control year,
            today: 'Today',
            clear: 'Clear',
            close: 'Ok',
            closeOnSelect: true // Close upon selecting a date,
        });

        $('.timepicker').pickatime({
            default: 'now', // Set default time: 'now', '1:30AM', '16:30'
            fromnow: 0,       // set default time to * milliseconds from now (using with default = 'now')
            twelvehour: false, // Use AM/PM or 24-hour format
            donetext: 'OK', // text for done-button
            cleartext: 'Clear', // text for clear-button
            canceltext: 'Cancel', // Text for cancel-button
            autoclose: false, // automatic close timepicker
            ampmclickable: true, // make AM PM clickable
            aftershow: function () {
            } //Function for after opening timepicker
        });

        $('#appointment').submit(function (event) {
            event.preventDefault();
            $.ajax({
                url: $(this).attr('action') || window.location.pathname,
                type: "POST",
                data: $(this).serialize(),
                success: function (data) {
                    $("#form_output").html(data);
                },
                error: function (jXHR, textStatus, errorThrown) {
                    alert(errorThrown);
                }
            });
            this.$http.post('api/ideas/', this.formInput).then((response) => {
                console.log("idea submit")
                $('.modal').modal("close")
            });
            console.log($(this).serialize())
            console.log("appointment submit")
            $('.modal').modal('close');
        })

    });

</script>
</html>